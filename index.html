
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMSU Stallion AI Companion</title>
    
    <!-- External Dependencies -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "@google/genai": "https://esm.sh/@google/genai@1.41.0",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>

    <style>
        :root {
            --mmsu-green: #014421;
            --mmsu-dark: #002211;
            --mmsu-gold: #FFD700;
        }
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .mmsu-header {
            background: linear-gradient(to right, var(--mmsu-green), var(--mmsu-dark));
            border-bottom: 3px solid var(--mmsu-gold);
        }
        .mmsu-banner {
            background: linear-gradient(135deg, var(--mmsu-green) 0%, var(--mmsu-dark) 100%);
        }
        .stallion-card {
            background: white;
            border-radius: 2rem;
            border: 1px solid #f1f5f9;
            transition: all 0.3s ease;
        }
        .dark .stallion-card {
            background: #1e293b;
            border-color: #334155;
            color: white;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .dark .glass-card {
            background: rgba(15, 23, 42, 0.95);
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
        .text-mmsu-green { color: var(--mmsu-green); }
        .text-mmsu-gold { color: var(--mmsu-gold); }
        .bg-mmsu-green { background-color: var(--mmsu-green); }
        .bg-mmsu-gold { background-color: var(--mmsu-gold); }

        /* Custom scrollbar for chat */
        .chat-scroll::-webkit-scrollbar { width: 4px; }
        .chat-scroll::-webkit-scrollbar-track { background: transparent; }
        .chat-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark .chat-scroll::-webkit-scrollbar-thumb { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { GoogleGenAI } from "@google/genai";

        // --- UTILS ---
        const getCollegeAcronym = (name) => {
            if (!name) return 'MMSU';
            return name.split(' ').filter(word => word.length > 3 || word === 'Law').map(word => word[0].toUpperCase()).join('');
        };

        // --- CONSTANTS ---
        const COLLEGES = [
            'College of Agriculture, Food and Sustainable Development',
            'College of Aquatic Science and Applied Technology',
            'College of Arts and Sciences',
            'College of Business, Economics and Accountancy',
            'College of Computing and Information Sciences',
            'College of Engineering',
            'College of Health Sciences',
            'College of Industrial Technology',
            'College of Teacher Education',
            'College of Medicine',
            'College of Law',
            'College of Dentistry',
            'College of Veterinary Medicine',
            'Graduate School'
        ];

        const MOCK_ANNOUNCEMENTS = [
            { id: 'a1', title: 'Second Semester Enrollment AY 2025-2026', date: 'Jan 12, 2026', content: 'Final week for adding/dropping subjects. Please visit your college registrar.', category: 'Enrollment' },
            { id: 'a2', title: '2026 Scholarship Renewal', date: 'Jan 18, 2026', content: 'Submit your 1st Semester grades to the Office of Student Affairs for renewal.', category: 'Scholarship' },
            { id: 'a3', title: 'MMSU 48th Foundation Anniversary', date: 'Jan 20, 2026', content: 'Happy Foundation Day, Stallions! Join us for the grand celebration at the Sunken Garden.', category: 'Event' },
        ];

        // --- AI SERVICE ---
        const GET_SYSTEM_INSTRUCTION = (mode, college, studentId) => {
            return `
You are the "MMSU Stallion AI Companion," the EXCLUSIVE academic assistant for Mariano Marcos State University (MMSU).
The current date is January 20, 2026. This is the 2nd Semester of AY 2025-2026. Today is the 48th Foundation Day!

STRICT OPERATIONAL CONSTRAINTS:
1. SCOPE: Strictly MMSU-based. Politely decline non-university queries with: "As the Stallion AI, my primary function is limited to serving the MMSU community."
2. LANGUAGE: Professional English.
3. TONE: Scholarly, supportive, and formal.
4. CONTEXT: User is from the ${college}.

MODE: ${mode} ${studentId ? `(Tutor for Student ${studentId})` : ''}
${mode === 'TUTORING' ? 'Focus on explaining concepts and curriculum specific advice.' : 'Focus on university navigation and policies.'}
`;
        };

        async function getAIResponse(prompt, college, mode, studentId, history) {
            try {
                // Safe check for process.env (common failure point on static hosts like GitHub Pages)
                const apiKey = (typeof process !== 'undefined' && process.env.API_KEY) ? process.env.API_KEY : '';
                
                if (!apiKey) {
                    console.error("API Key missing. If this is GitHub Pages, you must inject the key into the environment.");
                    return { text: "Connection issues. Please check the official portal. (Error: Service Unconfigured)", links: [] };
                }

                const ai = new GoogleGenAI({ apiKey });
                const contents = history?.slice(-10).map(m => ({
                    role: m.role === 'user' ? 'user' : 'model',
                    parts: [{ text: m.content }]
                })) || [];
                contents.push({ role: 'user', parts: [{ text: prompt }] });

                const response = await ai.models.generateContent({
                    model: 'gemini-3-flash-preview',
                    contents,
                    config: { 
                        systemInstruction: GET_SYSTEM_INSTRUCTION(mode, college, studentId),
                        tools: [{ googleSearch: {} }] 
                    }
                });

                const text = response.text || "I'm sorry, I'm having trouble processing that right now.";
                const groundingChunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks || [];
                const links = groundingChunks
                    .filter(c => c.web)
                    .map(c => ({ title: c.web?.title || 'Ref', uri: c.web?.uri || '#' }));

                return { text, links };
            } catch (e) {
                console.error("AI Error:", e);
                return { text: "Connection issues. Please check the official portal.", links: [] };
            }
        }

        // --- COMPONENTS ---

        const Header = ({ user, toggleTheme, onOpenSettings }) => (
            <header className="mmsu-header px-4 py-3 sticky top-0 z-50 shadow-md">
                <div className="container mx-auto flex justify-between items-center">
                    <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-mmsu-gold text-mmsu-green rounded-xl flex items-center justify-center shadow-inner border border-white/20">
                            <i className="fas fa-horse-head text-lg"></i>
                        </div>
                        <div className="flex flex-col">
                            <h1 className="text-sm font-black text-white uppercase tracking-tighter leading-none">MMSU Stallion</h1>
                            <span className="text-[9px] text-mmsu-gold font-bold uppercase tracking-widest">Academic AI Companion</span>
                        </div>
                    </div>
                    <div className="flex items-center gap-4">
                        <button onClick={toggleTheme} className="text-white hover:text-mmsu-gold transition-colors p-2 rounded-full hover:bg-white/10">
                            <i className={`fas ${user.theme === 'dark' ? 'fa-sun' : 'fa-moon'} text-lg`}></i>
                        </button>
                        <button onClick={onOpenSettings} className="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded-full border border-white/10 transition-all active:scale-95">
                            <div className="w-6 h-6 bg-mmsu-gold text-mmsu-green rounded-full flex items-center justify-center text-[10px] font-black uppercase">
                                {user.name.charAt(0)}
                            </div>
                            <span className="text-xs font-bold hidden sm:inline">{user.name.split(' ')[0]}</span>
                        </button>
                    </div>
                </div>
            </header>
        );

        const Home = ({ user, onStartChat }) => {
            const tools = [
                { label: 'Official Site', icon: 'fa-globe', color: 'bg-indigo-600', url: 'https://www.mmsu.edu.ph/' },
                { label: 'MVLE', icon: 'fa-graduation-cap', color: 'bg-orange-500', url: 'https://mvle4.mmsu.edu.ph/' },
                { label: 'Student Portal', icon: 'fa-user-circle', color: 'bg-emerald-500', url: 'https://mys.mmsu.edu.ph/' }
            ];

            const handleToolClick = (url) => {
                window.open(url, '_blank', 'noopener,noreferrer');
            };

            return (
                <div className="animate-fadeIn space-y-8 pb-10">
                    <div className="mmsu-banner p-8 md:p-12 rounded-[2.5rem] relative overflow-hidden text-white shadow-2xl">
                        <div className="relative z-10 max-w-2xl">
                            <span className="bg-mmsu-gold text-mmsu-green px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest mb-6 inline-block">AY 2025-2026 â€¢ 2nd Sem Portal</span>
                            <h2 className="text-4xl md:text-5xl font-black mb-4 leading-tight">Welcome Home, <br/><span className="text-mmsu-gold">Stallion {user.name.split(' ')[0]}!</span></h2>
                            <p className="text-sm md:text-lg opacity-80 mb-8 font-medium">Empowering your academic success at the <span className="text-mmsu-gold font-bold">{user.college}</span>.</p>
                            <button onClick={onStartChat} className="bg-white text-mmsu-green px-8 py-3 rounded-2xl font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl">Consult AI Companion</button>
                        </div>
                        <i className="fas fa-horse-head absolute bottom-0 right-0 text-[18rem] opacity-10 transform translate-x-1/4 translate-y-1/4 -rotate-12 pointer-events-none"></i>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 space-y-6">
                            <div className="flex items-center justify-between px-2">
                                <h3 className="text-xl font-black flex items-center">
                                    <span className="w-1.5 h-6 bg-mmsu-green rounded-full mr-3"></span>Latest Bulletins
                                </h3>
                                <button className="text-xs font-bold text-mmsu-green uppercase tracking-widest hover:underline">View All</button>
                            </div>
                            <div className="space-y-4">
                                {MOCK_ANNOUNCEMENTS.map(ann => (
                                    <div key={ann.id} className="stallion-card p-6 rounded-3xl group cursor-pointer hover:-translate-y-1 transition-all shadow-sm">
                                        <div className="flex justify-between items-start mb-3">
                                            <span className="text-[10px] font-black uppercase tracking-widest bg-gray-100 dark:bg-gray-700/50 px-3 py-1 rounded-full">{ann.category}</span>
                                            <span className="text-[10px] font-bold text-gray-400">{ann.date}</span>
                                        </div>
                                        <h4 className="font-bold text-lg mb-2 group-hover:text-mmsu-green transition-colors">{ann.title}</h4>
                                        <p className="text-sm text-gray-500 dark:text-gray-400 leading-relaxed">{ann.content}</p>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="space-y-6">
                            <h3 className="text-xl font-black flex items-center px-2">
                                <span className="w-1.5 h-6 bg-mmsu-gold rounded-full mr-3"></span>Stallion Tools
                            </h3>
                            <div className="grid grid-cols-1 gap-4">
                                {tools.map(tool => (
                                    <button key={tool.label} onClick={() => handleToolClick(tool.url)} className="stallion-card p-6 rounded-[2rem] text-center group hover:border-mmsu-gold transition-all hover:scale-105">
                                        <div className="flex items-center justify-center gap-4">
                                            <div className={`${tool.color} w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-lg group-hover:rotate-6 transition-transform`}>
                                                <i className={`fas ${tool.icon} text-xl`}></i>
                                            </div>
                                            <span className="text-[10px] font-black uppercase tracking-widest block">{tool.label}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ChatRoom = ({ user, mode, setMode }) => {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const scrollRef = useRef(null);

            useEffect(() => {
                if (messages.length === 0) {
                    setMessages([{
                        id: 'welcome',
                        role: 'assistant',
                        content: `Agbiag, Stallion! ðŸŽ I am your AI Companion for the **${user.college}**. How can I support your studies today?`,
                        timestamp: new Date()
                    }]);
                }
            }, [user.college]);

            useEffect(() => scrollRef.current?.scrollIntoView({ behavior: 'smooth' }), [messages, loading]);

            const handleSend = async () => {
                if (!input.trim() || loading) return;
                const userMsg = { id: Date.now().toString(), role: 'user', content: input, timestamp: new Date() };
                setMessages(prev => [...prev, userMsg]);
                setInput('');
                setLoading(true);

                const result = await getAIResponse(input, user.college, mode, user.studentId, messages);
                
                setMessages(prev => [...prev, { 
                    id: (Date.now()+1).toString(), 
                    role: 'assistant', 
                    content: result.text, 
                    groundingLinks: result.links, 
                    timestamp: new Date() 
                }]);
                setLoading(false);
            };

            return (
                <div className="flex flex-col h-[calc(100vh-200px)] glass-card rounded-[2.5rem] overflow-hidden border-0 shadow-2xl animate-fadeIn">
                    <div className={`px-6 py-4 flex justify-between items-center text-white shadow-md z-10 ${mode === 'TUTORING' ? 'bg-slate-800 border-b border-mmsu-gold/30' : 'bg-mmsu-green'}`}>
                        <div className="flex items-center gap-3">
                            <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-inner ${mode === 'TUTORING' ? 'bg-mmsu-gold text-mmsu-green' : 'bg-white/20 text-white'}`}>
                                <i className={`fas ${mode === 'TUTORING' ? 'fa-user-graduate' : 'fa-robot'}`}></i>
                            </div>
                            <div>
                                <h3 className="font-black text-xs uppercase tracking-widest leading-none">Stallion Assistant</h3>
                                <span className="text-[9px] font-bold opacity-70">Active â€¢ {getCollegeAcronym(user.college)}</span>
                            </div>
                        </div>
                        <div className="flex bg-black/20 p-1 rounded-xl">
                            <button onClick={() => setMode('GENERAL')} className={`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tighter transition-all ${mode === 'GENERAL' ? 'bg-mmsu-gold text-mmsu-green shadow-lg' : 'opacity-50 hover:opacity-100'}`}>General</button>
                            <button onClick={() => setMode('TUTORING')} className={`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tighter transition-all ${mode === 'TUTORING' ? 'bg-mmsu-gold text-mmsu-green shadow-lg' : 'opacity-50 hover:opacity-100'}`}>Tutor</button>
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto p-6 space-y-6 bg-gray-50/50 dark:bg-slate-900/50 chat-scroll">
                        {messages.map(m => (
                            <div key={m.id} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[85%] p-4 rounded-3xl text-sm leading-relaxed shadow-sm ${
                                    m.role === 'user' ? 'bg-mmsu-green text-white rounded-tr-none' : 'bg-white dark:bg-slate-800 text-slate-800 dark:text-gray-100 border dark:border-slate-700 rounded-tl-none'
                                }`}>
                                    <p className="whitespace-pre-wrap">{m.content}</p>
                                    {m.groundingLinks && m.groundingLinks.length > 0 && (
                                        <div className="mt-4 pt-4 border-t border-gray-100 dark:border-slate-700">
                                            <span className="text-[9px] font-black uppercase text-gray-400 block mb-2 tracking-widest">Citations</span>
                                            <div className="flex flex-wrap gap-2">
                                                {m.groundingLinks.map((l, i) => (
                                                    <a key={i} href={l.uri} target="_blank" className="bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-xl text-[10px] font-bold border border-blue-100 dark:border-blue-800 hover:scale-105 transition-transform">
                                                        <i className="fas fa-link mr-1"></i> {l.title}
                                                    </a>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        ))}
                        {loading && (
                            <div className="flex items-center gap-3 text-mmsu-green/40 dark:text-mmsu-gold/40">
                                <div className="flex gap-1"><div className="w-1.5 h-1.5 rounded-full animate-bounce bg-current"></div><div className="w-1.5 h-1.5 rounded-full animate-bounce [animation-delay:-0.15s] bg-current"></div><div className="w-1.5 h-1.5 rounded-full animate-bounce [animation-delay:-0.3s] bg-current"></div></div>
                                <span className="text-[10px] font-black uppercase tracking-widest">Consulting Stallion Data...</span>
                            </div>
                        )}
                        <div ref={scrollRef}></div>
                    </div>

                    <div className="p-6 bg-white dark:bg-slate-800 border-t dark:border-slate-700">
                        <div className="flex items-center gap-3 bg-gray-100 dark:bg-slate-900 p-2 rounded-2xl border dark:border-slate-700 focus-within:ring-2 focus-within:ring-mmsu-green transition-all shadow-inner">
                            <input 
                                value={input} 
                                onChange={e => setInput(e.target.value)}
                                onKeyDown={e => e.key === 'Enter' && handleSend()}
                                placeholder={mode === 'TUTORING' ? "Ask about courses or concepts..." : "Ask about enrollment, policies..."}
                                className="flex-1 bg-transparent border-0 focus:ring-0 text-sm p-2 font-medium outline-none text-slate-900 dark:text-white" 
                            />
                            <button onClick={handleSend} disabled={!input.trim() || loading} className="w-10 h-10 bg-mmsu-green text-white rounded-xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-lg disabled:opacity-20">
                                <i className="fas fa-paper-plane text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const SettingsModal = ({ user, setUser, onClose }) => {
            const [name, setName] = useState(user.name);
            const [coll, setColl] = useState(user.college);
            const [camp, setCamp] = useState(user.campus);
            const [sid, setSid] = useState(user.studentId || '');
            
            const save = () => { 
                setUser({ ...user, name, college: coll, campus: camp, studentId: sid }); 
                onClose(); 
            };
            
            return (
                <div className="fixed inset-0 bg-black/60 flex items-center justify-center z-[110] p-4 backdrop-blur-sm animate-fadeIn">
                    <div className="bg-white dark:bg-slate-800 rounded-[3rem] p-8 max-w-lg w-full shadow-2xl border dark:border-slate-700">
                        <div className="flex justify-between items-center mb-8">
                            <h3 className="text-2xl font-black tracking-tight dark:text-white">Profile Settings</h3>
                            <button onClick={onClose} className="p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full transition-colors dark:text-white">
                                <i className="fas fa-times"></i>
                            </button>
                        </div>

                        <div className="space-y-6">
                            <div className="space-y-2">
                                <label className="text-[10px] font-black uppercase text-gray-400 tracking-widest ml-2">Display Name</label>
                                <input type="text" value={name} onChange={e => setName(e.target.value)} className="w-full bg-gray-100 dark:bg-slate-900 border-0 rounded-2xl p-4 text-sm font-bold focus:ring-2 focus:ring-mmsu-green outline-none dark:text-white transition-all" />
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div className="space-y-2">
                                    <label className="text-[10px] font-black uppercase text-gray-400 tracking-widest ml-2">Campus</label>
                                    <select value={camp} onChange={e => setCamp(e.target.value)} className="w-full bg-gray-100 dark:bg-slate-900 border-0 rounded-2xl p-4 text-sm font-bold focus:ring-2 focus:ring-mmsu-green outline-none dark:text-white">
                                        <option value="Batac">Batac</option><option value="Laoag">Laoag</option><option value="Currimao">Currimao</option><option value="Dingras">Dingras</option>
                                    </select>
                                </div>
                                <div className="space-y-2">
                                    <label className="text-[10px] font-black uppercase text-gray-400 tracking-widest ml-2">Student ID</label>
                                    <input type="text" value={sid} onChange={e => setSid(e.target.value)} placeholder="YY-XXXXXX" className="w-full bg-gray-100 dark:bg-slate-900 border-0 rounded-2xl p-4 text-sm font-bold focus:ring-2 focus:ring-mmsu-green outline-none dark:text-white tracking-widest" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-[10px] font-black uppercase text-gray-400 tracking-widest ml-2">College</label>
                                <select value={coll} onChange={e => setColl(e.target.value)} className="w-full bg-gray-100 dark:bg-slate-900 border-0 rounded-2xl p-4 text-xs font-bold focus:ring-2 focus:ring-mmsu-green outline-none dark:text-white">
                                    {COLLEGES.map(c => <option key={c} value={c}>{c}</option>)}
                                </select>
                            </div>
                            <button onClick={save} className="w-full bg-mmsu-green text-white py-4 rounded-2xl font-black uppercase tracking-widest shadow-xl shadow-mmsu-green/20 hover:scale-[1.02] transition-transform">Save Stallion Profile</button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [tab, setTab] = useState('home');
            const [mode, setMode] = useState('GENERAL');
            const [showSettings, setShowSettings] = useState(false);
            const [user, setUser] = useState(() => {
                const saved = localStorage.getItem('stallion_companion_v2');
                return saved ? JSON.parse(saved) : { 
                    name: 'Guest Stallion', 
                    college: 'College of Computing and Information Sciences', 
                    campus: 'Batac', 
                    theme: 'light', 
                    studentId: '' 
                };
            });

            useEffect(() => {
                localStorage.setItem('stallion_companion_v2', JSON.stringify(user));
                if (user.theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [user]);

            return (
                <div className={`min-h-screen flex flex-col pb-24 transition-colors duration-300 ${user.theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-gray-50 text-slate-900'}`}>
                    <Header 
                        user={user} 
                        toggleTheme={() => setUser({...user, theme: user.theme === 'light' ? 'dark' : 'light'})} 
                        onOpenSettings={() => setShowSettings(true)} 
                    />
                    
                    <main className="container mx-auto px-4 py-8 flex-1">
                        {tab === 'home' && <Home user={user} onStartChat={() => setTab('chat')} />}
                        {tab === 'chat' && <ChatRoom user={user} mode={mode} setMode={setMode} />}
                        {tab === 'courses' && (
                            <div className="animate-fadeIn space-y-8">
                                <h3 className="text-2xl font-black px-2 flex items-center"><span className="w-1.5 h-6 bg-mmsu-green rounded-full mr-3"></span>Course Explorer</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {MOCK_COURSES.map(c => (
                                        <div key={c.id} className="stallion-card p-6 rounded-3xl border hover:border-mmsu-gold transition-all flex flex-col h-full group">
                                            <div className="flex justify-between items-center mb-4">
                                                <span className="bg-mmsu-gold/10 text-mmsu-green text-[10px] font-black px-3 py-1 rounded-full uppercase">{c.code}</span>
                                                <span className="text-[10px] font-bold opacity-40 uppercase">{c.credits} Units</span>
                                            </div>
                                            <h4 className="font-bold text-lg mb-2 leading-tight group-hover:text-mmsu-green transition-colors">{c.title}</h4>
                                            <p className="text-xs text-gray-400 italic mb-6">"{c.description}"</p>
                                            <button className="mt-auto bg-gray-50 dark:bg-slate-700 text-mmsu-green dark:text-mmsu-gold py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all hover:bg-mmsu-gold hover:text-mmsu-green">Details</button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        {tab === 'tutors' && (
                            <div className="animate-fadeIn max-w-4xl mx-auto space-y-10 py-10">
                                <div className="mmsu-banner p-12 rounded-[4rem] text-center space-y-8 shadow-2xl relative overflow-hidden">
                                    <div className="w-24 h-24 md:w-32 md:h-32 bg-mmsu-gold rounded-[2.5rem] flex items-center justify-center text-mmsu-green mx-auto shadow-2xl transform rotate-3">
                                        <i className="fas fa-graduation-cap text-5xl"></i>
                                    </div>
                                    <div className="space-y-4">
                                        <h2 className="text-4xl font-black text-white">Academic Tutor</h2>
                                        <p className="text-mmsu-gold font-medium max-w-lg mx-auto">Get personalized help with concepts, study strategies, and research grounded in MMSU curriculum.</p>
                                    </div>
                                    <button onClick={() => { setMode('TUTORING'); setTab('chat'); }} className="bg-white text-mmsu-green px-10 py-4 rounded-2xl font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl">Launch Tutoring Room</button>
                                    <i className="fas fa-brain absolute top-0 right-0 text-[12rem] opacity-5 transform translate-x-1/4 -translate-y-1/4"></i>
                                </div>
                            </div>
                        )}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-slate-800/90 backdrop-blur-xl border-t dark:border-slate-700 px-6 py-4 flex justify-around items-center z-[100] shadow-[0_-10px_30px_rgba(0,0,0,0.05)]">
                        {[
                            { id: 'home', icon: 'fa-house', label: 'Home' },
                            { id: 'chat', icon: 'fa-comments', label: 'AI Chat' },
                            { id: 'courses', icon: 'fa-book-open', label: 'Catalog' },
                            { id: 'tutors', icon: 'fa-user-graduate', label: 'Tutor' }
                        ].map(item => (
                            <button 
                                key={item.id} 
                                onClick={() => setTab(item.id)} 
                                className={`flex flex-col items-center gap-1.5 transition-all relative ${tab === item.id ? 'text-mmsu-green dark:text-mmsu-gold' : 'text-gray-400 hover:text-gray-600 dark:hover:text-gray-200'}`}
                            >
                                <i className={`fas ${item.icon} text-xl`}></i>
                                <span className="text-[9px] font-black uppercase tracking-widest">{item.label}</span>
                                {tab === item.id && <span className="absolute -bottom-2 w-1 h-1 bg-current rounded-full"></span>}
                            </button>
                        ))}
                    </nav>

                    {showSettings && <SettingsModal user={user} setUser={setUser} onClose={() => setShowSettings(false)} />}
                </div>
            );
        };

        const rootEl = document.getElementById('root');
        if (rootEl) createRoot(rootEl).render(<App />);
    </script>
</body>
</html>
